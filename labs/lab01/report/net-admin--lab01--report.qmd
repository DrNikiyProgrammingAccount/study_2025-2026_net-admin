---
## Author
author:
  name: Андрюшин Никита Сергеевич

## Title
title: "Лабораторная работа"
subtitle: "Номер 1"
license: "CC BY"
---

# Цель работы

Установка инструмента моделирования конфигурации сети Cisco Packet Tracer, знакомство с его интерфейсом

# Выполнение лабораторной работы

Для выполнения лабораторной работы нам необходимо установить Cisco Packet Tracer. Скачиваем установочный файл программы (рис. [-@fig-001]).

![Установочный файл Cisco Packet Tracer](image/1.png){#fig-001}

Так как для работы в последних версиях Packet Tracer требуется авторизация, которую мы хотим обойти для локальной работы, нам необходимо заблокировать программе доступ в Интернет. Для этого в ОС Windows открываем «Монитор брандмауэра Защитника Windows в режиме повышенной безопасности» (рис. [-@fig-002]).

![Окно монитора брандмауэра Windows](image/2.png){#fig-002}

Создаем новое правило для исходящего подключения. В мастере создания правила выбираем тип «Для программы» (рис. [-@fig-003]).

![Выбор типа правила для программы](image/3.png){#fig-003}

Указываем полный путь к исполняемому файлу PacketTracer.exe, установленному на компьютере (рис. [-@fig-004]).

![Указание пути к файлу программы](image/4.png){#fig-004}

В следующем окне выбираем действие «Блокировать подключение» (рис. [-@fig-005]).

![Выбор действия блокировки подключения](image/5.png){#fig-005}

Применяем правило для всех профилей сетей: доменного, частного и публичного (рис. [-@fig-006]).

![Применение правила к профилям](image/6.png){#fig-006}

Задаем имя для создаваемого правила, например, «Packet Tracer», и нажимаем «Готово» (рис. [-@fig-007]).

![Задание имени правила](image/7.png){#fig-007}

Запускаем программу. Переходим к ознакомлению с интерфейсом. Через меню «File» мы можем создавать, сохранять и открывать проекты, а также настраивать параметры рабочей среды (рис. [-@fig-008]).

![Меню File в интерфейсе программы](image/8.png){#fig-008}

Строим простейшую сеть на основе концентратора (Hub). Размещаем на рабочей области 4 ПК и один концентратор Hub-PT. Соединяем их прямым кабелем (рис. [-@fig-009]).

![Топология сети с концентратором](image/9.png){#fig-009}

Настраиваем сетевые параметры на оконечных устройствах. На вкладке Config интерфейса FastEthernet0 задаем статический IP-адрес (например, 192.168.1.11 для PC0) и маску подсети 255.255.255.0 (рис. [-@fig-010]). Аналогично настраиваем остальные ПК (PC1, PC2, PC3).

![Настройка IP-адреса на PC0](image/10.png){#fig-010}

Для проверки работы сети и анализа пакетов будем использовать режим симуляции. На панели инструментов находим кнопку «Add Simple PDU» (закрытый конверт) для создания тестового пакета (рис. [-@fig-011]).

![Инструмент Add Simple PDU](image/11.png){#fig-011}

Переходим в режим симуляции (Simulation Mode). Создаем сценарий отправки пакета от PC0 к PC3. Видим, что на устройстве отправителе (PC0) сформировались пакеты ICMP (эхо-запрос) и ARP (для определения MAC-адреса получателя) (рис. [-@fig-012]).

![Режим симуляции, отправка пакета от PC0 к PC3](image/12.png){#fig-012}

Запускаем симуляцию. Наблюдаем, как концентратор рассылает полученный кадр на все активные порты (широковещательно), кроме того, с которого пришел сигнал. PC3 принимает пакет, так как IP-адрес назначения совпадает с его собственным, остальные ПК отбрасывают кадр (рис. [-@fig-013]).

![Широковещательная рассылка пакета концентратором](image/13.png){#fig-013}

Изучаем информацию о PDU (Protocol Data Unit) на PC0. На вкладке OSI Model можно проследить инкапсуляцию данных. На канальном уровне (Layer 2) формируется кадр типа Ethernet II.
*   MAC-адрес источника: 000D.BDD7.2791 (PC0).
*   MAC-адрес назначения: FFFF.FFFF.FFFF (широковещательный).
Это ARP-запрос, необходимый для выяснения MAC-адреса узла с IP 192.168.1.13 (рис. [-@fig-014]).

![Информация о PDU, уровни OSI](image/14.png){#fig-014}

На вкладке Inbound/Outbound PDU Details детально рассматриваем структуру кадра. Тип кадра — Ethernet II.
Поля кадра:
1.  Preamble: Синхронизация.
2.  DEST ADDR: FFFF.FFFF.FFFF (Broadcast).
3.  SRC ADDR: 000D.BDD7.2791 (Unicast).
4.  TYPE: 0x0806 (ARP).
5.  DATA: ARP Request.
6.  FCS: Checksum.
При передвижении пакета через концентратор (устройство 1 уровня) структура кадра и MAC-адреса не изменяются (рис. [-@fig-015]).

![Детали PDU: структура кадра Ethernet II](image/15.png){#fig-015}

Также рассматриваем структуру вложенных пакетов. Для IP-пакета указаны IP-адреса отправителя и получателя, версия (IPv4), длина заголовка. Для ICMP-сообщения видим поля Type (Тип), Code (Код) и Checksum (Контрольная сумма). MAC-адрес представляет собой 48-битное число (6 байт), обычно записываемое в шестнадцатеричном виде (рис. [-@fig-016]).

![Детали PDU: заголовки IP и ICMP](image/16.png){#fig-016}

Теперь смоделируем ситуацию коллизии. Для этого подготовим отправку двух пакетов одновременно: от PC0 к PC3 и от PC1 к PC2 (рис. [-@fig-017]).

![Подготовка сценария для создания коллизии](image/17.png){#fig-017}

Запускаем симуляцию. Пакеты одновременно приходят на концентратор. Так как концентратор является общей средой передачи данных (один домен коллизий), происходит наложение сигналов — коллизия. Пакеты повреждаются и помечаются значком огня (рис. [-@fig-018]).

![Визуализация коллизии на концентраторе](image/18.png){#fig-018}

Открываем информацию о PDU на концентраторе (Hub0) в момент коллизии. Видим системное сообщение: «This frame collided with another frame at the device». Это подтверждает, что концентратор не умеет буферизировать кадры (рис. [-@fig-019]).

![Сообщение о коллизии в свойствах PDU](image/19.png){#fig-019}

В деталях PDU можно наблюдать структуру пакета ARP, который участвовал в коллизии. Тип кадра — Ethernet II.
*   MAC-адрес назначения: FFFF.FFFF.FFFF.
*   MAC-адрес источника: 000D.BDD7.2791.
*   Type: 0x0806 (ARP).
В самом пакете ARP видим Opcode: 0x0001 (Запрос) (рис. [-@fig-020]).

![Детали ARP-пакета при коллизии](image/20.png){#fig-020}

Теперь заменим концентратор на коммутатор (Switch) модели Cisco 2950-24. Соберем аналогичную топологию с 4 ПК (PC4, PC5, PC6, PC7) (рис. [-@fig-021]).

![Топология сети с коммутатором](image/21.png){#fig-021}

Запускаем симуляцию передачи данных от PC4 к PC6. Коммутатор, работая на канальном уровне (Layer 2), анализирует MAC-адреса в заголовке кадра. Он строит таблицу MAC-адресов и отправляет кадр только в тот порт, где находится получатель (unicast), в отличие от широковещательной работы хаба (рис. [-@fig-022]).

![Прохождение пакета через коммутатор](image/22.png){#fig-022}

Изучаем PDU на коммутаторе. Видим кадр типа Ethernet II.
*   MAC-адрес источника: 00E0.F797.7708 (PC4).
*   MAC-адрес назначения: 0009.7C29.7D20 (PC7).
Коммутатор считывает адрес назначения и принимает решение о коммутации на основе таблицы MAC-адресов (рис. [-@fig-023]).

![Информация о PDU на коммутаторе](image/23.png){#fig-023}

В деталях PDU видим структуру кадра, проходящего через коммутатор. Это кадр Ethernet II.
*   DEST ADDR: 0009.7C29.7D20.
*   SRC ADDR: 00E0.F797.7708.
*   TYPE: 0x0800 (IPv4).
При прохождении через коммутатор MAC-адреса источника и назначения в заголовке кадра не изменяются. Коммутатор лишь читает их (рис. [-@fig-024]).

![Детали Ethernet-кадра на коммутаторе](image/24.png){#fig-024}

Проверяем работу сети при высокой нагрузке. Запускаем одновременную передачу с нескольких узлов: от PC4 к PC7 и от PC6 к Switch0. Коммутатор микросегментирует сеть, создавая отдельный домен коллизий для каждого порта. Благодаря буферизации кадров коллизий не возникает, и все пакеты успешно доставляются (рис. [-@fig-025]).

![Успешная одновременная передача данных без коллизий](image/25.png){#fig-025}

Создадим гибридную сеть, соединив часть с концентратором (PC0-PC3) и часть с коммутатором (PC4-PC7). Для соединения Hub0 и Switch0 используем кросс-кабель (пунктирная линия) (рис. [-@fig-026]).

![Гибридная топология (концентратор + коммутатор)](image/26.png){#fig-026}

Запускаем симуляцию в гибридной сети. Отправляем пакеты между сегментами. Сначала мы можем наблюдать коллизию на стороне концентратора (значок огня).
Причина возникновения коллизии: Концентратор Hub0 работает в полудуплексном режиме и является одним большим доменом коллизий. В момент, когда PC0 пытается передать данные, коммутатор Switch0 также может пытаться передать служебный кадр (например, STP) или ответный трафик в сторону хаба. Поскольку среда занята, происходит столкновение сигналов.
Почему пакеты достигают назначения: Устройства используют протокол CSMA/CD. После обнаружения коллизии они выжидают случайный интервал времени и повторяют отправку. Коммутатор Switch0 буферизирует пакеты. Как только линия освобождается, передача успешно завершается (рис. [-@fig-027]).

![Симуляция работы гибридной сети с коллизией](image/27.png){#fig-027}

Обращаем внимание на появление пакетов STP (Spanning Tree Protocol). Исследуем пакет STP, исходящий от Switch0 (рис. [-@fig-028]).

![Список событий симуляции](image/28.png){#fig-028}

В деталях PDU протокола STP видим, что используется кадр типа Ethernet 802.3 (вместо поля Type используется поле Length).
*   MAC-адрес источника: 0002.4A16.7B01 (Switch0).
*   MAC-адрес назначения: 0180.C200.0000 (Multicast STP).
*   Length: 0x0026 (38 байт).
В поле LLC (Logical Link Control) видим DSAP: 0x42 и SSAP: 0x42, что указывает на протокол STP (рис. [-@fig-029]).

![Структура пакета STP и кадра 802.3](image/29.png){#fig-029}

Добавляем в сеть маршрутизатор (Router) Cisco 2811. Соединяем его с коммутатором Switch0 прямым кабелем (рис. [-@fig-030]).

![Топология с добавлением маршрутизатора](image/30.png){#fig-030}

Маршрутизатор периодически рассылает пакеты CDP (Cisco Discovery Protocol). Изучаем структуру CDP-пакета, исходящего от Router0.
Тип кадра: Ethernet 802.3 SNAP.
*   MAC-адрес источника: 0002.4A16.7B06 (Router0).
*   MAC-адрес назначения: 0100.0CCC.CCCC (Multicast CDP).
*   Length: Длина данных.
*   SNAP: OUI 0x00000C (Cisco), PID 0x2000 (CDP).
В поле данных содержатся TLV-структуры с информацией об устройстве (Device ID, Address, Port ID и т.д.) (рис. [-@fig-031]).

![Детали пакета CDP на маршрутизаторе](image/31.png){#fig-031}

![Детали пакета CDP на маршрутизаторе](image/32.png){#fig-032}

# Выводы

В результате выполнения лабораторной работы были получены навыки использования Cisco Packet Tracer